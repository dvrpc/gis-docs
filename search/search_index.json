{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"agserver/","text":"ArcGIS Server Configuration DVRPC followed a pretty standard installation and configuration procedure for our ArcGIS Server. Initial configuration can be found on gis-server at C:\\serverconfig\\serverconfig.xml ESRI documentation for ArcGIS server installation can be found here Our ArcGIS Server is federated with our ArcGIS Portal. Federating an ArcGIS Server site with your Portal integrates the security and sharing models of your Portal with the ArcGIS Server site. Backup and Recovery DVRPC uses the standard ESRI backup utility for our ArcGIS server on an infrequent basis. The only downfall to using this utility though is that it doesn't backup cache tiles and tiling schemes. It's possible to modify the backup script to accommodate the cache located at C:\\arcgisserver\\directories\\arcgiscache Backup and Recovery scripts","title":"ArcGIS Server"},{"location":"agserver/#arcgis-server-configuration","text":"DVRPC followed a pretty standard installation and configuration procedure for our ArcGIS Server. Initial configuration can be found on gis-server at C:\\serverconfig\\serverconfig.xml ESRI documentation for ArcGIS server installation can be found here Our ArcGIS Server is federated with our ArcGIS Portal. Federating an ArcGIS Server site with your Portal integrates the security and sharing models of your Portal with the ArcGIS Server site.","title":"ArcGIS Server Configuration"},{"location":"agserver/#backup-and-recovery","text":"DVRPC uses the standard ESRI backup utility for our ArcGIS server on an infrequent basis. The only downfall to using this utility though is that it doesn't backup cache tiles and tiling schemes. It's possible to modify the backup script to accommodate the cache located at C:\\arcgisserver\\directories\\arcgiscache Backup and Recovery scripts","title":"Backup and Recovery"},{"location":"database/","text":"Database Configuration The geodatabase is a PostgreSQL database with PostGIS geometry. The database uses a \u2018user-schema\u2019 design. Only the data owner for each schema can load/edit data. DVRPC has created a schema for each data category. Each schema has a data owner user and data viewer user. An SDE schema houses administrative ESRI SDE tables. There is also a planner_editor user that was created for versioned editing in any schema. Installation and configuration of the geodatabase followed ESRI documentation closely. Schemas and Roles List of schemas and their respective data owner and viewer user names Biota - biota, biota_viewer Boundaries - boundaries, boundaries_viewer Demographics - demographics, demographics_viewer Economy - economy, economy_viewer Environment - environment, environment_viewer Freight - freight, freight_viewer Geology - geology, geology_viewer Hydrography - hydrography, hydrography_viewer ImgElev - imgelev, imgelev_viewer Location - location, location_viewer Parcels - parcels, parcels_viewer Planning - planning, planning_viewer Structure - structure, structure_viewer Transportation - transportation, transportation_viewer Utilities - utilities, utilites_viewer SDE - sde Other users (dvrpc_viewer, planner_editor, postgres) dvrpc_viewer has read-only permissions on all schemas in the GIS database. Users can use this role to connect to the database using psql, python, r, QGIS, and other methods to query GIS data. Backup and Recovery A backup script runs on gis-db Sundays to ensure optimal data recovery and backups over 30 days are removed. GIS data is not updated frequently enough to warrant daily backups. backup script location on gis-db : C:\\gis-admin\\database\\backup\\backup.bat backups are stored at: \\\\filesrv04\\GIS_DB$ backup.bat on Github Recovery can be automated using GIS_DB.py. This script first runs sql to create the db, create the postgis extension, and create roles/schemas. Then a bat file is used to restore the db from a backup. Public schema first, sde schema second, and rest last. This follows ESRI best practice for geodatabase recovery Recovery Scripts on Github","title":"Database"},{"location":"database/#database-configuration","text":"The geodatabase is a PostgreSQL database with PostGIS geometry. The database uses a \u2018user-schema\u2019 design. Only the data owner for each schema can load/edit data. DVRPC has created a schema for each data category. Each schema has a data owner user and data viewer user. An SDE schema houses administrative ESRI SDE tables. There is also a planner_editor user that was created for versioned editing in any schema. Installation and configuration of the geodatabase followed ESRI documentation closely.","title":"Database Configuration"},{"location":"database/#schemas-and-roles","text":"List of schemas and their respective data owner and viewer user names Biota - biota, biota_viewer Boundaries - boundaries, boundaries_viewer Demographics - demographics, demographics_viewer Economy - economy, economy_viewer Environment - environment, environment_viewer Freight - freight, freight_viewer Geology - geology, geology_viewer Hydrography - hydrography, hydrography_viewer ImgElev - imgelev, imgelev_viewer Location - location, location_viewer Parcels - parcels, parcels_viewer Planning - planning, planning_viewer Structure - structure, structure_viewer Transportation - transportation, transportation_viewer Utilities - utilities, utilites_viewer SDE - sde Other users (dvrpc_viewer, planner_editor, postgres) dvrpc_viewer has read-only permissions on all schemas in the GIS database. Users can use this role to connect to the database using psql, python, r, QGIS, and other methods to query GIS data.","title":"Schemas and Roles"},{"location":"database/#backup-and-recovery","text":"A backup script runs on gis-db Sundays to ensure optimal data recovery and backups over 30 days are removed. GIS data is not updated frequently enough to warrant daily backups. backup script location on gis-db : C:\\gis-admin\\database\\backup\\backup.bat backups are stored at: \\\\filesrv04\\GIS_DB$ backup.bat on Github Recovery can be automated using GIS_DB.py. This script first runs sql to create the db, create the postgis extension, and create roles/schemas. Then a bat file is used to restore the db from a backup. Public schema first, sde schema second, and rest last. This follows ESRI best practice for geodatabase recovery Recovery Scripts on Github","title":"Backup and Recovery"},{"location":"implementation/","text":"Implementation DVRPC has implemented five of these components on four internal virtual machines named: gis-db : PostgreSQL, ArcGIS Data Store gis-server : ArcGIS Server (hosting server for Portal, federated), ArcGIS Web Adaptor gis-portal : ArcGIS Portal, ArcGIS Web Adaptor, ArcGIS License Server web-06 : 2 ArcGIS Web Adaptors gis-portal Web Adaptor named 'dvrpc' gis-server Web Adaptor named 'portal' arcgis sub-domain of dvrpc.org DVRPC will also rely on ESRI\u2019s SAAS cloud product called ArcGIS Online to create web maps, web applications, and promote data sharing with the public. DVRPC has registered a large number of public GIS services with ArcGIS Online\u2019s Open Data platform and will continue to use it for open data distribution. gis-server , gis-portal , gis-db all reside behind the DMZ and are open to the internet with 2 web adaptors installed on web-06 ArcGIS Server is federated with ArcGIS Portal and Windows Authentication is active. Hardware specification for each virtualized computer gis-db (2) Intel Xeon Silver 4114 CPU @ 2.20GHz, 2195 Mhz, 4 Core 24GB RAM 600GB SSD gis-server (2) Intel Xeon Silver 4114 CPU @ 2.20GHz, 2195 Mhz, 4 Core 24GB RAM 300GB SSD gis-portal (1) Intel Xeon Silver 4114 CPU @ 2.20GHz, 2195 Mhz, 4 Core 8GB RAM 100GB SSD Software versions and details of configuration Windows Server 2019 Standard on all servers gis-db PostgreSQL 15.6, POSTGIS 3.4.1 Using PostGIS Geometry type User Schema (biota, freight, demographics, transportation, etc.) gis-server ArcGIS Server 10.9 Federated server https://gis-server.dvrpc.org/arcgis (internal address) https://arcgis.dvrpc.org/portal (external address) Registered data stores (PostgreSQL data owner connection files, ArcGIS data store) IIS gis-portal ArcGIS Portal 10.9 https://gis-portal.dvrpc.org/arcgis/home/ (internal address) https://arcgis.dvrpc.org/dvrpc/home (external address) Windows Authentication IIS gis-db ArcGIS Data Store 10.9 web-06 ArcGIS Web Adaptor 10.9","title":"Implementation"},{"location":"implementation/#implementation","text":"DVRPC has implemented five of these components on four internal virtual machines named: gis-db : PostgreSQL, ArcGIS Data Store gis-server : ArcGIS Server (hosting server for Portal, federated), ArcGIS Web Adaptor gis-portal : ArcGIS Portal, ArcGIS Web Adaptor, ArcGIS License Server web-06 : 2 ArcGIS Web Adaptors gis-portal Web Adaptor named 'dvrpc' gis-server Web Adaptor named 'portal' arcgis sub-domain of dvrpc.org DVRPC will also rely on ESRI\u2019s SAAS cloud product called ArcGIS Online to create web maps, web applications, and promote data sharing with the public. DVRPC has registered a large number of public GIS services with ArcGIS Online\u2019s Open Data platform and will continue to use it for open data distribution. gis-server , gis-portal , gis-db all reside behind the DMZ and are open to the internet with 2 web adaptors installed on web-06 ArcGIS Server is federated with ArcGIS Portal and Windows Authentication is active.","title":"Implementation"},{"location":"implementation/#hardware-specification-for-each-virtualized-computer","text":"gis-db (2) Intel Xeon Silver 4114 CPU @ 2.20GHz, 2195 Mhz, 4 Core 24GB RAM 600GB SSD gis-server (2) Intel Xeon Silver 4114 CPU @ 2.20GHz, 2195 Mhz, 4 Core 24GB RAM 300GB SSD gis-portal (1) Intel Xeon Silver 4114 CPU @ 2.20GHz, 2195 Mhz, 4 Core 8GB RAM 100GB SSD","title":"Hardware specification for each virtualized computer"},{"location":"implementation/#software-versions-and-details-of-configuration","text":"Windows Server 2019 Standard on all servers gis-db PostgreSQL 15.6, POSTGIS 3.4.1 Using PostGIS Geometry type User Schema (biota, freight, demographics, transportation, etc.) gis-server ArcGIS Server 10.9 Federated server https://gis-server.dvrpc.org/arcgis (internal address) https://arcgis.dvrpc.org/portal (external address) Registered data stores (PostgreSQL data owner connection files, ArcGIS data store) IIS gis-portal ArcGIS Portal 10.9 https://gis-portal.dvrpc.org/arcgis/home/ (internal address) https://arcgis.dvrpc.org/dvrpc/home (external address) Windows Authentication IIS gis-db ArcGIS Data Store 10.9 web-06 ArcGIS Web Adaptor 10.9","title":"Software versions and details of configuration"},{"location":"intro/","text":"About DVRPC\u2019s legacy enterprise GIS consisted of an ArcGIS server and an Oracle geodatabase with our planners using ArcGIS desktop and our web applications using services hosted on our ArcGIS server. While the system worked well, there were some drawbacks with things like database management flexibility, license access for desktop users, and ArcGIS server flexibility. ESRI\u2019s software and services have since evolved to products like ArcGIS Portal/Online to provide a more powerful \u2018online\u2019 foundation for mapping, data management, and web GIS within the enterprise. These products will help shape DVRPC\u2019s GIS future and make GIS more accessible and easier for all to use. DVRPC\u2019s new Enterprise GIS Deployment consists of six main components ArcGIS Enterprise Portal plays a central role in organizing and sharing GIS data within our ArcGIS system. The portal provides a user-friendly, searchable repository for our data. It also helps staff view data and create and share maps. Most of the GIS data in these maps originates from our Enterprise Geodatabase and is hosted by our ArcGIS server. The portal provides an easy window into our GIS data library without requiring heavy GIS software training or ArcGIS Desktop licenses. All staff can login with their Windows domain login and password and can view data, even from outside of DVRPC\u2019s network. ArcGIS Server is our hosting server that powers mapping and analysis in our Portal PostgreSQL Database stores all geospatial data and is registered as a data store with ArcGIS Server. Data is compatible/accessible with ESRI software and open source software/languages like QGIS, R, SQL, Python, and many more ArcGIS Web Adaptor integrates ArcGIS Server and Portal with our existing web servers and our organization's security infrastructure. ArcGIS Data Store provides nimble data storage for the hosting server used with our deployment. There are no plans right now to use the data store, but it\u2019s software is installed and configured to work with the Server/Portal. ArcGIS Online is a cloud-based product to make maps, share and collaborate with the public and member governments through apps and open data initiatives.","title":"Home"},{"location":"intro/#about","text":"DVRPC\u2019s legacy enterprise GIS consisted of an ArcGIS server and an Oracle geodatabase with our planners using ArcGIS desktop and our web applications using services hosted on our ArcGIS server. While the system worked well, there were some drawbacks with things like database management flexibility, license access for desktop users, and ArcGIS server flexibility. ESRI\u2019s software and services have since evolved to products like ArcGIS Portal/Online to provide a more powerful \u2018online\u2019 foundation for mapping, data management, and web GIS within the enterprise. These products will help shape DVRPC\u2019s GIS future and make GIS more accessible and easier for all to use. DVRPC\u2019s new Enterprise GIS Deployment consists of six main components ArcGIS Enterprise Portal plays a central role in organizing and sharing GIS data within our ArcGIS system. The portal provides a user-friendly, searchable repository for our data. It also helps staff view data and create and share maps. Most of the GIS data in these maps originates from our Enterprise Geodatabase and is hosted by our ArcGIS server. The portal provides an easy window into our GIS data library without requiring heavy GIS software training or ArcGIS Desktop licenses. All staff can login with their Windows domain login and password and can view data, even from outside of DVRPC\u2019s network. ArcGIS Server is our hosting server that powers mapping and analysis in our Portal PostgreSQL Database stores all geospatial data and is registered as a data store with ArcGIS Server. Data is compatible/accessible with ESRI software and open source software/languages like QGIS, R, SQL, Python, and many more ArcGIS Web Adaptor integrates ArcGIS Server and Portal with our existing web servers and our organization's security infrastructure. ArcGIS Data Store provides nimble data storage for the hosting server used with our deployment. There are no plans right now to use the data store, but it\u2019s software is installed and configured to work with the Server/Portal. ArcGIS Online is a cloud-based product to make maps, share and collaborate with the public and member governments through apps and open data initiatives.","title":"About"},{"location":"portal/","text":"ArcGIS Portal Configuration DVRPC followed a pretty standard installation and configuration proceedure for our ArcGIS Portal. ESRI documentation for ArcGIS Portal installation can be found here Backup A backup script runs on gis-portal Sundays to ensure optimal data recovery and backups over 30 days are removed. backup python script location on gis-portal : C:\\gis-admin\\agportal\\backup.py backup batch script location on gis-portal : C:\\gis-admin\\agportal\\backup.bat backups are stored at: \\\\filesrv04\\GIS_PORTAL$ backup.py on Github backup.bat on Github User Accounts and Security Logins are managed through Microsoft Windows Active Directory. DVRPC followed the following documentation for implementation. Because there is not an active connection for account creation, GIS has developed a script to add/remove staff accounts to the GIS Portal. All staff outside of the GIS department are assigned a Viewer role. Creator roles are only reserved for GIS department staff at this time. Datastores and Syncing Content from the GIS Database The DVRPC Portal has been configured with registered datastores for each database schema to help organize data effectively. Any time a new feature is added or deleted to the database, the datastore must be synced with the Portal. The easiest way to do this is to visit the Portal and login then navigate to Content and the Data Store folder. Click the Data Store (schema) for which your feature class was loaded to and in the upper right, click Layers. You\u2019ll see a list of the layers that are already registered with the Portal. Hit sync and the Portal will add the new feature. After hitting sync you\u2019ll be prompted to with the following window. Please make sure that the button is toggled in the \u2018OFF\u2019 position like shown in the image above. If left in the default \u2018ON\u2019 position, any metadata that has been updated in the Portal will be overwritten with whatever metadata is associated with the original feature class. The feature class will be registered as a Feature Layer and a Map Image Layer in the Portal and stored in the respective category folder. Once the content is added: Set sharing permissions on the feature. Only items that you want to be publicly shared should be shared with 'Everyone'. Otherwise, use 'Organization'. Share your feature services only to their respective category group including the groups setup for open data portal syncing License Server Our ArcGIS License Server is installed on gis-portal . We use a provision file located here: C:\\Program Files\\ArcGIS\\LicenseManager\\bin to assign specific licenses to groups/individuals.","title":"ArcGIS Portal"},{"location":"portal/#arcgis-portal-configuration","text":"DVRPC followed a pretty standard installation and configuration proceedure for our ArcGIS Portal. ESRI documentation for ArcGIS Portal installation can be found here","title":"ArcGIS Portal Configuration"},{"location":"portal/#backup","text":"A backup script runs on gis-portal Sundays to ensure optimal data recovery and backups over 30 days are removed. backup python script location on gis-portal : C:\\gis-admin\\agportal\\backup.py backup batch script location on gis-portal : C:\\gis-admin\\agportal\\backup.bat backups are stored at: \\\\filesrv04\\GIS_PORTAL$ backup.py on Github backup.bat on Github","title":"Backup"},{"location":"portal/#user-accounts-and-security","text":"Logins are managed through Microsoft Windows Active Directory. DVRPC followed the following documentation for implementation. Because there is not an active connection for account creation, GIS has developed a script to add/remove staff accounts to the GIS Portal. All staff outside of the GIS department are assigned a Viewer role. Creator roles are only reserved for GIS department staff at this time.","title":"User Accounts and Security"},{"location":"portal/#datastores-and-syncing-content-from-the-gis-database","text":"The DVRPC Portal has been configured with registered datastores for each database schema to help organize data effectively. Any time a new feature is added or deleted to the database, the datastore must be synced with the Portal. The easiest way to do this is to visit the Portal and login then navigate to Content and the Data Store folder. Click the Data Store (schema) for which your feature class was loaded to and in the upper right, click Layers. You\u2019ll see a list of the layers that are already registered with the Portal. Hit sync and the Portal will add the new feature. After hitting sync you\u2019ll be prompted to with the following window. Please make sure that the button is toggled in the \u2018OFF\u2019 position like shown in the image above. If left in the default \u2018ON\u2019 position, any metadata that has been updated in the Portal will be overwritten with whatever metadata is associated with the original feature class. The feature class will be registered as a Feature Layer and a Map Image Layer in the Portal and stored in the respective category folder. Once the content is added: Set sharing permissions on the feature. Only items that you want to be publicly shared should be shared with 'Everyone'. Otherwise, use 'Organization'. Share your feature services only to their respective category group including the groups setup for open data portal syncing","title":"Datastores and Syncing Content from the GIS Database"},{"location":"portal/#license-server","text":"Our ArcGIS License Server is installed on gis-portal . We use a provision file located here: C:\\Program Files\\ArcGIS\\LicenseManager\\bin to assign specific licenses to groups/individuals.","title":"License Server"}]}